{% extends "home.html.jinja2" %}


{% block onglet %}
        <div class="haut">
            <div class="vues">
                <button disabled class="vue">Vue par échéances</button>
                <a class="lienv" href="{{ url_for("colonne_project", user_id=user.id, project_id=project_id) }}"> <button class="vue">Vue par projets</button> </a>
                <a class="lienv" href="{{ url_for("list", user_id=user.id) }}"> <button class="vue">Vue par tâches</button> </a>
            </div>

        </div>
        {% endblock %}

{% block projects %}
    {% for projet in projects %}
        {% if projet.id == project_id  %}

            <div class="lienp" onclick="window.location.href='{{ url_for("home", user_id=user.id)}}'">
                <button class="projet" disabled>{{ projet.name }}</button>
            </div>
        {% else %}
                <a class="lienp" href="{{ url_for("home_project", user_id=user.id, project_id=projet.id)}}">
                    <button class="projet" >{{ projet.name }}</button>
                </a>
        {% endif %}


    {% endfor %}
     {% if user.role==1 or user.role==3 %}
        <a class="lienp">
            <button data-modal-target="#form" class="projet"> + </button>
        </a>

        <div id="form" class="new">

            <form  id="formnp" action="{{ url_for("home_project", user_id=user.id, project_id=project_id) }}" method="post">

                <div class="bandeaux"><h3>Nouveau Projet</h3>  <button date-close-button class="close"> X </button> </div>

                <label for="name">Nom du projet :</label>
                   <input type="text" id="name" name="name" value="" required>
                <label for="des">Description du projet :</label>
                <textarea type="text" id="des" name="description" value="" required></textarea>
                <label for="date">Date de fin prévisionnel :
                    <input type="date" id="date" name="date" value="" required>
                </label>

                <label for="dev">Ajouter des développeurs :</label>
                    <input type="text" id="dev" name="developpeurs" value="" multiple>
                <div class="precision"> Entrer les adresses emails des développeurs en les séparant simplement avec un espace</div>



                <p ><input name="project" type="submit"></p>

            </form>
        </div>
    {% endif %}



{% endblock %}


{% block Notif %}
        <div id="lateral-panel">
            <input id="lateral-panel-input" type="checkbox">
            <div id="lateral-panel-bloc">
                <label id="lateral-panel-label" for="lateral-panel-input"> <div class="bell"><img src="/static/img/bell.png"></div> </label>
                <div id="lateral-panel-content">
                    <!-- ici le code HTML du panneau-->
                    <div class="titre-notif">
                            <p align="center"> Notifications </p>
                    </div>

                    {% for notif in notifs %}
                        <div class="notif" >
                            <div class="supprimer-notif">
                                <form method="POST"
                                action="{{ url_for('delete', notif_id=notif.id, user_id=user.id, last_page=4, project_id=project_id) }}">
                                <input type="submit" value="X"
                                    onclick="return confirm('Are you sure you want to delete this entry?')">
                            </form>
                            </div>
                            {% if notif.link_task==None %}
                                {% if notif.link_project==None %}
                                    <div class="notif-content">
                                        <p align="center"> {{ notif.content }} <p/>
                                    </div>
                                {% else %}
                                    <div class="notif-content" onclick="location.href='/{{ user.id }}/{{ notif.link_project }}/colonne_project';" style="cursor: pointer;">
                                        <p align="center"> {{ notif.content }}<p/>
                                    </div>
                                {% endif %}
                            {% else %}
                                <div class="notif-content" onclick="location.href='/{{ user.id }}/{{ notif.link_project }}/{{ notif.link_task }}/popUp';" style="cursor: pointer;">
                                    <p align="center"> {{ notif.content }}<p/>
                                </div>
                            {% endif %}
                        </div>
                    {% endfor %}



                </div>
            </div>
        </div>
    {% endblock %}